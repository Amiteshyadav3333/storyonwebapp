<!-- <!DOCTYPE html>
<html>
<head>
    <title>Home</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h2>Welcome, {{ user }}!</h2>
    <p>Total videos uploaded by you: {{ video_count }}</p>

    <form method="get" action="/">
        <input type="text" name="search" placeholder="Search videos..." value="{{ search_query }}">
        <button type="submit">Search</button>
        <a href="/upload">Upload Video</a> |
        <a href="/logout">Logout</a>
    </form>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <ul>
          {% for category, message in messages %}
            <li class="{{ category }}">{{ message }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    <hr>
    <h3>All Videos</h3>

    {% if videos %}
        {% for filename, uploader in videos %}
            <div style="margin-bottom: 20px;">
                <video width="320" height="240" controls>
                    <source src="{{ url_for('static', filename='videos/' + filename) }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <p><strong>{{ filename }}</strong> by {{ uploader }}</p>
                <p style="font-size:12px;color:gray;">Debug Path: {{ url_for('static', filename='videos/' + filename) }}</p>
            </div>
        {% endfor %}
    {% else %}
        <p>No videos available.</p>
    {% endif %}

</body>
</html> -->


<!DOCTYPE html>
<html>
<head>
    <title>Home</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <style>
        .video-card {
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .video-card:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }
        .fade-in {
            animation: fadeIn 1s ease-in-out;
        }
    </style>
</head>
<body class="animate__animated animate__fadeIn">
    <h2 class="animate__animated animate__fadeInDown">Welcome, {{ user }}!</h2>
    <p>Total videos uploaded by you: {{ video_count }}</p>

    <form method="get" action="/">
        <input type="text" name="search" placeholder="Search videos..." value="{{ search_query }}">
        <button type="submit">Search</button>
        <a href="/upload">Upload Video</a> |
        <a href="/profile">Profile</a> |
        <a href="/logout">Logout</a>
    </form>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <ul>
          {% for category, message in messages %}
            <li class="{{ category }} animate__animated animate__fadeInUp">{{ message }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    <hr>
    <h3 class="animate__animated animate__fadeInLeft">All Videos</h3>

    {% if videos %}
        {% for filename, uploader in videos %}
            <div class="video-card animate__animated animate__fadeInUp" style="margin-bottom: 20px; padding: 10px; border: 1px solid #ccc; border-radius: 8px;">
                <video width="320" height="240" controls>
                    <source src="{{ url_for('static', filename='videos/' + filename) }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <p><strong>{{ filename }}</strong> by {{ uploader }}</p>
                {% if uploader == user %}
                    <form method="post" action="/delete/{{ filename }}" onsubmit="return confirm('Are you sure you want to delete this video?');">
                        <button type="submit">Delete</button>
                    </form>
                {% endif %}
            </div>
        {% endfor %}
    {% else %}
        <p>No videos available.</p>
    {% endif %}

</body>
</html>